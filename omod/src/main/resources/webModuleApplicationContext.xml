<?xml version="1.0" encoding="UTF-8"?>
<!--

    This Source Code Form is subject to the terms of the Mozilla Public License,
    v. 2.0. If a copy of the MPL was not distributed with this file, You can
    obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under
    the terms of the Healthcare Disclaimer located at http://openmrs.org/license.

    Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS
    graphic logo is a trademark of OpenMRS Inc.

-->
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans
  		    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

	<!-- Add here beans related to the web context -->
	
	<bean id="legacyUiUrlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="patternParser"><null/></property>
		<property name="interceptors">
			<list>
				<ref bean="localeChangeInterceptor" />
				<ref bean="themeChangeInterceptor" />
			</list>
		</property>
		<property name="order" value="100"/>
		<property name="mappings">
			<props>
				<prop key="admin/patients/patient.form">patientForm</prop>
				<prop key="admin/patients/mergePatients.form">mergePatientsForm</prop>
				
				<prop key="admin/patients/tribe.list">tribeList</prop>
								
				<prop key="admin/patients/patientIdentifierType.list">patientIdentifierTypeList</prop>
				<prop key="admin/patients/patientIdentifierType.form">patientIdentifierTypeForm</prop>
			
				<prop key="admin/users/role.list">roleList</prop>
				<prop key="admin/users/role.form">roleForm</prop>
				<prop key="admin/users/alert.list">alertList</prop>
				<prop key="admin/users/alert.form">alertForm</prop>
				<prop key="admin/users/privilege.list">privilegeList</prop>
				<prop key="admin/users/privilege.form">privilegeForm</prop>
				<prop key="admin/users/user.htm">userView</prop>

				<prop key="admin/person/addPerson.htm">addPerson</prop>
				
				<prop key="**/*.portlet">portletController</prop>

                <prop key="admin/modules/module.list">moduleListController</prop>
                <prop key="admin/modules/moduleProperties.form">modulePropertiesFormController</prop>

                <prop key="admin/observations/obs.form">obsForm</prop>
				
				<prop key="admin/person/person.form">personForm</prop>
				<prop key="admin/person/relationshipType.list">relationshipTypeList</prop>
				<prop key="admin/person/relationshipType.form">relationshipTypeForm</prop>
				<prop key="admin/person/relationshipTypeViews.form">relationshipTypeViewForm</prop>
				<prop key="admin/person/personAttributeType.form">personAttributeTypeForm</prop>
				<prop key="admin/observations/personObs.form">personObsForm</prop>
				
				<prop key="admin/encounters/encounter.form">encounterForm</prop>
				<prop key="admin/encounters/encounterType.list">encounterTypeList</prop>
				<prop key="admin/encounters/encounterType.form">encounterTypeForm</prop>
				<prop key="admin/encounters/encounterDisplay.list">encounterDisplayController</prop>
				
				<prop key="admin/locations/location.list">locationList</prop>
				<prop key="admin/locations/location.form">locationForm</prop>

				<prop key="dictionary/concept.form">conceptForm</prop>
				<prop key="dictionary/conceptStats.form">conceptStatsForm</prop>
				<prop key="dictionary/concept.htm">conceptView</prop>

				<prop key="admin/concepts/conceptClass.list">conceptClassList</prop>
				<prop key="admin/concepts/conceptClass.form">conceptClassForm</prop>
				<prop key="admin/concepts/conceptSource.list">conceptSourceList</prop>
				<prop key="admin/concepts/conceptSource.form">conceptSourceForm</prop>
				<prop key="admin/concepts/conceptDrug.list">conceptDrugList</prop>
				<prop key="admin/concepts/conceptDrug.form">conceptDrugForm</prop>
				<prop key="admin/concepts/conceptDatatype.list">conceptDatatypeList</prop>
				<prop key="admin/concepts/conceptProposal.list">conceptProposalList</prop>
				<prop key="admin/concepts/conceptProposal.form">conceptProposalForm</prop>
				<prop key="admin/concepts/proposeConcept.form">proposeConceptForm</prop>
				<prop key="admin/hl7/hl7Source.list">hl7SourceList</prop>
				<prop key="admin/hl7/hl7Source.form">hl7SourceForm</prop>

				<prop key="options.form">optionsForm</prop>
				<prop key="personDashboard.form">personDashboardForm</prop>

				<prop key="admin/forms/formSchemaDesign.form">formSchemaDesignForm</prop>
				<prop key="admin/forms/formEdit.form">formEditForm</prop>
				<prop key="admin/forms/form.list">formList</prop>
				<prop key="admin/forms/field.form">fieldForm</prop>
				<prop key="admin/forms/field.list">fieldList</prop>
				<prop key="admin/forms/fieldType.form">fieldTypeForm</prop>
				<prop key="admin/forms/fieldType.list">fieldTypeList</prop>
				<prop key="admin/forms/auditField.form">auditFieldController</prop>
				
				<prop key="admin/scheduler/scheduler.list">schedulerListController</prop>
				<prop key="admin/scheduler/scheduler.form">schedulerFormController</prop>

				<prop key="remotecommunication/postHl7.form">postHl7FormController</prop>

				<prop key="admin/programs/program.list">programList</prop>
				<prop key="admin/programs/program.form">programForm</prop>
				<prop key="admin/programs/conversion.list">stateConversionList</prop>
				<prop key="admin/programs/conversion.form">stateConversionForm</prop>
				<prop key="admin/programs/workflow.form">workflowFormController</prop>

				<prop key="admin/maintenance/globalProps.form">globalPropertyController</prop>
				<prop key="admin/maintenance/serverLog.form">serverLogController</prop>
				<prop key="admin/maintenance/implementationid.form">implementationIdFormController</prop>
				<prop key="admin/maintenance/currentUsers.list">currentUsersFormController</prop>
				
				<prop key="forgotPassword.form">forgotPasswordForm</prop>

				<prop key="**/globalProperties.portlet">globalPropertyPortletController</prop>
				<prop key="**/addressLayout.portlet">addressLayoutPortletController</prop>
				<prop key="**/nameLayout.portlet">nameLayoutPortletController</prop>
				<prop key="**/patientPrograms.portlet">patientProgramsPortletController</prop>
				<prop key="**/personRelationships.portlet">personRelationshipsPortletController</prop>
				<prop key="**/patientEncounters.portlet">patientEncountersPortletController</prop>
				<prop key="**/patientVisits.portlet">patientVisitsPortletController</prop>
				<prop key="**/personFormEntry.portlet">personFormEntryPortletController</prop>

				<prop key="**/*.field">fieldGenController</prop>

				<prop key="admin/visits/visitType.list">visitTypeList</prop>
				<prop key="admin/visits/visitType.form">visitTypeForm</prop>
				<prop key="admin/visits/visitAttributeType.list">visitAttributeTypeList</prop>
				<prop key="admin/visits/visitAttributeType.form">visitAttributeTypeForm</prop>
				
				<prop key="admin/provider/providerAttributeType.list">providerAttributeTypeList</prop>
				<prop key="admin/provider/providerAttributeType.form">providerAttributeTypeForm</prop>	

				<prop key="**/*.htm">springController</prop>
 			</props>
		</property>
	</bean>
	
	<bean id="springController" class="org.springframework.web.servlet.mvc.UrlFilenameViewController" />
 	 
	<!-- ** Patient ** -->

	<bean id="patientForm" class="org.openmrs.web.controller.patient.PatientFormController">
		<property name="commandName" value="patient"/>
		<property name="formView" value="/module/legacyui/admin/patients/patientForm"/>
		<property name="successView" value="patient.form"/>
	</bean>
	<!-- ** /Patient ** -->
		
	<bean id="tribeList" class="org.openmrs.web.controller.patient.TribeFormController">
		<property name="commandName" value="tribeForm"/>
		<property name="formView" value="/module/legacyui/admin/patients/tribeList"/>
		<property name="successView" value="tribe.list"/>
	</bean>

	<!-- **  Patient Identifier Type   ** -->
	<bean id="patientIdentifierTypeList"
		class="org.openmrs.web.controller.patient.PatientIdentifierTypeListController">
		<property name="commandName" value="patientIdentifierTypeList"/>
		<property name="formView" value="/module/legacyui/admin/patients/patientIdentifierTypeList"/>
		<property name="successView" value="patientIdentifierType.list"/>
	</bean>
	<bean id="patientIdentifierTypeForm"
		class="org.openmrs.web.controller.patient.PatientIdentifierTypeFormController">
		<property name="commandName" value="patientIdentifierType"/>
		<property name="validator" ref="patientIdentifierTypeValidator"/>
		<property name="formView" value="/module/legacyui/admin/patients/patientIdentifierTypeForm"/>
		<property name="successView" value="patientIdentifierType.list"/>
	</bean>
	<!-- ** /Patient Identifier Type   ** -->

	<!-- ** Merge Patient ** -->
	<bean id="mergePatientsForm"
		class="org.openmrs.web.controller.patient.MergePatientsFormController">
		<property name="commandName" value="patient1"/>
		<property name="formView" value="/module/legacyui/admin/patients/mergePatientsForm"/>
		<property name="successView" value="mergePatients.form"/>
	</bean>
	<!-- ** /Merge Patient ** -->

	<!-- ====== /Patient Sector ====== -->

	<!-- =========================== -->
	<!-- ======  User Sector  ====== -->
	<!-- =========================== -->

	<bean id="userView" class="org.openmrs.web.controller.user.UserController">
		<property name="commandName" value="command"/>
		<property name="formView" value="/module/legacyui/admin/users/user"/>
		<property name="successView" value="user.htm"/>
	</bean>

	<!-- ** Role  ** -->
	<bean id="roleList" class="org.openmrs.web.controller.user.RoleListController">
		<property name="commandName" value="roleList"/>
		<property name="formView" value="/module/legacyui/admin/users/roleList"/>
		<property name="successView" value="role.list"/>
	</bean>

	<!--  Form Controller for the add/edit role page -->
	<bean id="roleForm" class="org.openmrs.web.controller.user.RoleFormController">
		<property name="commandName" value="role"/>
		<property name="validator" ref="roleValidator"/>
		<property name="formView" value="/module/legacyui/admin/users/roleForm"/>
		<property name="successView" value="role.list"/>
	</bean>
	<!--  ** /Role ** -->
	<!-- ** Privilege  ** -->
	<bean id="privilegeList" class="org.openmrs.web.controller.user.PrivilegeListController">
		<property name="commandName" value="privilegeList"/>
		<property name="formView" value="/module/legacyui/admin/users/privilegeList"/>
		<property name="successView" value="privilege.list"/>
	</bean>

	<!--  Form Controller for the add/edit privilege page -->
	<bean id="privilegeForm" class="org.openmrs.web.controller.user.PrivilegeFormController">
		<property name="commandName" value="privilege"/>
		<property name="validator" ref="privilegeValidator"/>
		<property name="formView" value="/module/legacyui/admin/users/privilegeForm"/>
		<property name="successView" value="privilege.list"/>
	</bean>
	<!--  ** /Privilege ** -->

	<!-- ** Alert  ** -->
	<bean id="alertList" class="org.openmrs.notification.web.controller.AlertListController">
		<property name="commandName" value="alertList"/>
		<property name="formView" value="/module/legacyui/admin/users/alertList"/>
		<property name="successView" value="alert.list"/>
	</bean>

	<bean id="alertForm" class="org.openmrs.notification.web.controller.AlertFormController">
		<property name="commandName" value="alert"/>
		<property name="formView" value="/module/legacyui/admin/users/alertForm"/>
		<property name="successView" value="alert.list"/>
	</bean>

    <bean id="moduleListController"
          class="org.openmrs.module.web.controller.ModuleListController">
        <property name="commandName" value="moduleList"/>
        <property name="formView" value="/module/legacyui/admin/modules/moduleList"/>
        <property name="successView" value="module.list"/>
    </bean>
    <bean id="modulePropertiesFormController"
          class="org.openmrs.module.web.controller.ModulePropertiesFormController">
        <property name="commandName" value="moduleProperties"/>
        <property name="formView" value="/module/legacyui/admin/modules/modulePropertiesForm"/>
        <property name="successView" value="moduleProperties.form"/>
    </bean>
	<!--  ** /Alert ** -->

	<!-- ====== /User Sector ====== -->
		
		<!-- ** Add Person ** -->
	<!--  Used for finding duplicate patients / users -->
	<bean id="addPerson" class="org.openmrs.web.controller.person.AddPersonController">
		<property name="commandName" value="people"/>
		<property name="formView" value="/module/legacyui/admin/person/addPerson"/>
		<property name="successView" value="admin/person/newPerson.form"/>
	</bean>
	<!-- ** /Add Person ** -->
	
	<bean id="portletController" class="org.openmrs.web.controller.PortletController" />
	
	<bean id="fieldGenController" class="org.openmrs.web.controller.FieldGenController" />

	<bean id="globalPropertyPortletController" class="org.openmrs.web.controller.GlobalPropertyPortletController" />
	<bean id="patientProgramsPortletController" class="org.openmrs.web.controller.PatientProgramsPortletController" />
	<bean id="personRelationshipsPortletController" class="org.openmrs.web.controller.PersonRelationshipsPortletController" />
	<bean id="patientEncountersPortletController" class="org.openmrs.web.controller.PatientEncountersPortletController" />
	<bean id="patientVisitsPortletController" class="org.openmrs.web.controller.PatientVisitsPortletController" />
	<bean id="personFormEntryPortletController" class="org.openmrs.web.controller.PersonFormEntryPortletController" />
	<bean id="addressLayoutPortletController" class="org.openmrs.web.controller.layout.AddressLayoutPortletController" />
	<bean id="nameLayoutPortletController" class="org.openmrs.web.controller.layout.NameLayoutPortletController" />

	<bean id="schedulerListController"
		class="org.openmrs.scheduler.web.controller.SchedulerListController">
		<property name="commandName" value="taskList"/>
		<property name="formView" value="/module/legacyui/admin/scheduler/schedulerList"/>
		<property name="successView" value="scheduler.list"/>
	</bean>
	
	<bean id="schedulerFormController" class="org.openmrs.scheduler.web.controller.SchedulerFormController">
		<property name="commandName" value="task"/>
		<property name="formView" value="/module/legacyui/admin/scheduler/schedulerForm"/>
		<property name="successView" value="scheduler.list"/>
		<property name="validator" ref="taskValidator"/>
	</bean>

	<bean id="personObsForm" class="org.openmrs.web.controller.observation.PersonObsFormController">
		<property name="commandName" value="command"/>
		<property name="formView" value="/admin/observations/personObsForm"/>
		<property name="successView" value="personObs.form"/>
	</bean>

	<bean id="personForm" class="org.openmrs.web.controller.person.PersonFormController">
		<property name="commandName" value="person"/>
		<property name="formView" value="/module/legacyui/admin/person/personForm"/>
		<property name="successView" value="person.form"/>
		<property name="validator" ref="personValidator"/>
	</bean>

	<bean id="relationshipTypeList"
		class="org.openmrs.web.controller.person.RelationshipTypeListController">
		<property name="commandName" value="relationshipTypeList"/>
		<property name="formView" value="/module/legacyui/admin/person/relationshipTypeList"/>
		<property name="successView" value="relationshipType.list"/>
	</bean>
	<bean id="relationshipTypeForm"
		class="org.openmrs.web.controller.person.RelationshipTypeFormController">
		<property name="commandName" value="relationshipType"/>
		<property name="formView" value="/module/legacyui/admin/person/relationshipTypeForm"/>
		<property name="successView" value="relationshipType.list"/>
	</bean>
	<bean id="relationshipTypeViewForm"
		class="org.openmrs.web.controller.person.RelationshipTypeViewFormController">
		<property name="commandName" value="relationshipTypeList"/>
		<property name="formView" value="/module/legacyui/admin/person/relationshipTypeViewForm"/>
		<property name="successView" value="relationshipType.list"/>
	</bean>

	<bean id="personAttributeTypeForm"
		class="org.openmrs.web.controller.person.PersonAttributeTypeFormController">
		<property name="commandName" value="personAttributeType"/>
		<property name="formView" value="/module/legacyui/admin/person/personAttributeTypeForm"/>
		<property name="successView" value="personAttributeType.list"/>
		<property name="validator" ref="personAttributeTypeValidator"/>
	</bean>
	
	<bean id="encounterForm" class="org.openmrs.web.controller.encounter.EncounterFormController">
		<property name="commandName" value="encounter"/>
		<property name="formView" value="/module/legacyui/admin/encounters/encounterForm"/>
		<property name="successView" value="encounter.form"/>
	</bean>

	<bean id="encounterTypeList"
		class="org.openmrs.web.controller.encounter.EncounterTypeListController">
		<property name="commandName" value="encounterTypeList"/>
		<property name="formView" value="/module/legacyui/admin/encounters/encounterTypeList"/>
		<property name="successView" value="encounterType.list"/>
	</bean>

	<bean id="encounterTypeForm"
		class="org.openmrs.web.controller.encounter.EncounterTypeFormController">
		<property name="commandName" value="encounterType"/>
		<property name="validator" ref="encounterTypeValidator"/>
		<property name="formView" value="/module/legacyui/admin/encounters/encounterTypeForm"/>
		<property name="successView" value="encounterType.list"/>
	</bean>

	
	
	<bean id="locationList" class="org.openmrs.web.controller.encounter.LocationListController">
		<property name="commandName" value="locationList"/>
		<property name="formView" value="/module/legacyui/admin/locations/locationList"/>
		<property name="successView" value="location.list"/>
	</bean>

	<bean id="locationForm" class="org.openmrs.web.controller.encounter.LocationFormController">
		<property name="commandName" value="location"/>
		<property name="validator" ref="locationValidator"/>
		<property name="formView" value="/module/legacyui/admin/locations/locationForm"/>
		<property name="successView" value="location.list"/>
	</bean>
	
	<bean id="encounterDisplayController"
		class="org.openmrs.web.controller.encounter.EncounterDisplayController" />

	<bean id="conceptFormValidator" class="org.openmrs.web.controller.ConceptFormValidator" />
	<bean id="conceptForm" class="org.openmrs.web.controller.ConceptFormController">
		<property name="commandName" value="command"/>
		<property name="validator" ref="conceptFormValidator"/>
		<property name="formView" value="/module/legacyui/dictionary/conceptForm"/>
		<property name="successView" value="concept.form"/>
	</bean>
	<bean id="conceptStatsForm" class="org.openmrs.web.controller.ConceptStatsFormController">
		<property name="commandName" value="concept"/>
		<property name="formView" value="/module/legacyui/dictionary/conceptStatsForm"/>
		<property name="successView" value="conceptStats.form"/>
	</bean>
	<bean id="conceptView" class="org.openmrs.web.controller.ConceptFormController">
		<property name="commandName" value="command"/>
		<property name="formView" value="/module/legacyui/dictionary/concept"/>
		<property name="successView" value="concept.htm"/>
	</bean>

	<bean id="conceptDrugList"
		class="org.openmrs.web.controller.concept.ConceptDrugListController">
		<property name="commandName" value="conceptDrugList"/>
		<property name="formView" value="/admin/concepts/conceptDrugList"/>
		<property name="successView" value="conceptDrug.list"/>
	</bean>

	<bean id="conceptDrugForm"
		class="org.openmrs.web.controller.concept.ConceptDrugFormController">
		<property name="commandName" value="drug"/>
		<property name="validator" ref="conceptDrugValidator"/>
		<property name="formView" value="/admin/concepts/conceptDrugForm"/>
		<property name="successView" value="conceptDrug.list"/>
	</bean>

	<bean id="conceptClassList"
		class="org.openmrs.web.controller.concept.ConceptClassListController">
		<property name="commandName" value="conceptClassList"/>
		<property name="formView" value="/admin/concepts/conceptClassList"/>
		<property name="successView" value="conceptClass.list"/>
	</bean>

	<bean id="conceptClassForm"
		class="org.openmrs.web.controller.concept.ConceptClassFormController">
		<property name="commandName" value="conceptClass"/>
		<property name="validator" ref="conceptClassValidator"/>
		<property name="formView" value="/admin/concepts/conceptClassForm"/>
		<property name="successView" value="conceptClass.list"/>
	</bean>
	
	<bean id="conceptDatatypeList"
		class="org.openmrs.web.controller.concept.ConceptDatatypeListController">
		<property name="commandName" value="conceptDatatypeList"/>
		<property name="formView" value="/admin/concepts/conceptDatatypeList"/>
		<property name="successView" value="conceptDatatype.list"/>
	</bean>

	<bean id="conceptProposalList"
		class="org.openmrs.web.controller.concept.ConceptProposalListController">
		<property name="commandName" value="conceptProposalMap"/>
		<property name="formView" value="/admin/concepts/conceptProposalList"/>
		<property name="successView" value="conceptProposal.list"/>
	</bean>

	<bean id="conceptProposalForm"
		class="org.openmrs.web.controller.concept.ConceptProposalFormController">
		<property name="commandName" value="conceptProposal"/>
		<property name="formView" value="/admin/concepts/conceptProposalForm"/>
		<property name="successView" value="conceptProposal.list"/>
	</bean>

	<bean id="proposeConceptForm"
		class="org.openmrs.web.controller.concept.ProposeConceptFormController">
		<property name="commandName" value="conceptProposal"/>
		<property name="formView" value="/admin/concepts/proposeConceptForm"/>
		<property name="successView" value="conceptProposal.list"/>
	</bean>

	<bean id="conceptSourceList"
		class="org.openmrs.web.controller.concept.ConceptSourceListController">
		<property name="commandName" value="conceptSourceList"/>
		<property name="formView" value="/admin/concepts/conceptSourceList"/>
		<property name="successView" value="conceptSource.list"/>
	</bean>

	<bean id="conceptSourceForm"
		class="org.openmrs.web.controller.concept.ConceptSourceFormController">
		<property name="commandName" value="conceptSource"/>
		<property name="validator" ref="conceptSourceValidator"/>
		<property name="formView" value="/admin/concepts/conceptSourceForm"/>
		<property name="successView" value="conceptSource.list"/>
	</bean>

	<bean id="formList" class="org.openmrs.web.controller.form.FormListController">
		<property name="commandName" value="formList"/>
		<property name="formView" value="/module/legacyui/admin/forms/formList"/>
		<property name="successView" value="form.list"/>
	</bean>

	<bean id="formSchemaDesignForm" class="org.openmrs.web.controller.form.FormFormController">
		<property name="commandName" value="form"/>
		<property name="formView" value="/module/legacyui/admin/forms/formSchemaDesignForm"/>
		<property name="successView" value="form.list"/>
	</bean>

	<bean id="formEditForm" class="org.openmrs.web.controller.form.FormFormController">
		<property name="commandName" value="form"/>
		<property name="formView" value="/module/legacyui/admin/forms/formEditForm"/>
		<property name="validator" ref="formEditValidator"/>
		<property name="successView" value="form.list"/>
	</bean>

	<bean id="fieldList" class="org.openmrs.web.controller.form.FieldListController">
		<property name="commandName" value="fieldList"/>
		<property name="formView" value="/module/legacyui/admin/forms/fieldList"/>
		<property name="successView" value="field.list"/>
	</bean>

	<bean id="fieldForm" class="org.openmrs.web.controller.form.FieldFormController">
		<property name="commandName" value="field"/>
		<property name="validator" ref="fieldValidator"/>
		<property name="formView" value="/module/legacyui/admin/forms/fieldForm"/>
		<property name="successView" value="field.list"/>
	</bean>
	<bean id="auditFieldController" class="org.openmrs.web.controller.form.AuditFieldController">
		<property name="formView" value="/module/legacyui/admin/forms/auditFieldForm"/>
		<property name="successView" value="auditField.form"/>
	</bean>

	<bean id="fieldTypeList" class="org.openmrs.web.controller.form.FieldTypeListController">
		<property name="commandName" value="fieldTypeList"/>
		<property name="formView" value="/module/legacyui/admin/forms/fieldTypeList"/>
		<property name="successView" value="fieldType.list"/>
	</bean>

	<bean id="fieldTypeForm" class="org.openmrs.web.controller.form.FieldTypeFormController">
		<property name="commandName" value="fieldType"/>
		<property name="validator" ref="fieldTypeValidator"/>
		<property name="formView" value="/module/legacyui/admin/forms/fieldTypeForm"/>
		<property name="successView" value="fieldType.list"/>
	</bean>

	<bean id="programList" class="org.openmrs.web.controller.program.ProgramListController">
		<property name="commandName" value="programList"/>
		<property name="formView" value="/module/legacyui/admin/programs/programList"/>
		<property name="successView" value="program.list"/>
	</bean>
	<bean id="programForm" class="org.openmrs.web.controller.program.ProgramFormController">
		<property name="commandName" value="program"/>
		<property name="validator" ref="programValidator"/>
		<property name="formView" value="/module/legacyui/admin/programs/programForm"/>
		<property name="successView" value="program.list"/>
	</bean>

	<bean id="workflowFormController"
		class="org.openmrs.web.controller.program.WorkflowFormController">
		<property name="commandName" value="workflow"/>
		<property name="formView" value="/module/legacyui/admin/programs/workflowForm"/>
		<property name="successView" value="program.list"/>
	</bean>

	<bean id="stateConversionList"
		class="org.openmrs.web.controller.program.StateConversionListController">
		<property name="commandName" value="stateConversionList"/>
		<property name="formView" value="/module/legacyui/admin/programs/conversionList"/>
		<property name="successView" value="conversion.list"/>
	</bean>
	<bean id="stateConversionForm"
		class="org.openmrs.web.controller.program.StateConversionFormController">
		<property name="commandName" value="conversion"/>
		<property name="validator" ref="stateConversionValidator"/>
		<property name="formView" value="/module/legacyui/admin/programs/conversionForm"/>
		<property name="successView" value="conversion.list"/>
	</bean>

	<bean id="hl7SourceList" class="org.openmrs.web.controller.hl7.Hl7SourceListController">
		<property name="commandName" value="hl7SourceList"/>
		<property name="formView" value="/module/legacyui/admin/hl7/hl7SourceList"/>
		<property name="successView" value="hl7Source.list"/>
		
	</bean>

	<bean id="hl7SourceForm"
		class="org.openmrs.web.controller.hl7.HL7SourceFormController">
		<property name="commandName" value="hl7Source"/>
		<property name="validator" ref="hl7SourceValidator"/>
		<property name="formView" value="/module/legacyui/admin/hl7/hl7SourceForm"/>
		<property name="successView" value="hl7Source.list"/>
	</bean>
        
	<bean id="postHl7FormController" class="org.openmrs.web.controller.remotecommunication.PostHl7Controller">
		<property name="formView" value="/remotecommunication/postHl7Form"/>
	</bean>
	<bean id="optionsForm" class="org.openmrs.web.controller.OptionsFormController">
		<property name="commandName" value="opts"/>
		<property name="commandClass" value="org.openmrs.web.OptionsForm"/>
		<property name="formView" value="/module/legacyui/optionsForm"/>
		<property name="successView" value="options.form"/>
	</bean>
	<bean id="personDashboardForm"
		class="org.openmrs.web.controller.person.PersonDashboardController">
		<property name="commandName" value="person"/>
		<property name="formView" value="/personDashboardForm"/>
		<property name="successView" value="personDashboard.form"/>
	</bean>
	<bean id="globalPropertyController"
		class="org.openmrs.web.controller.maintenance.GlobalPropertyController">
		<property name="commandName" value="globalProps"/>
		<property name="formView" value="/module/legacyui/admin/maintenance/globalPropsForm"/>
		<property name="successView" value="globalProps.form"/>
	</bean>
	<bean id="serverLogController"
		class="org.openmrs.web.controller.maintenance.ServerLogController">
		<property name="commandName" value="logLines"/>
		<property name="formView" value="/module/legacyui/admin/maintenance/serverLog"/>
		<property name="successView" value="serverLog.form"/>
	</bean>
	<bean id="implementationIdFormController"
		class="org.openmrs.web.controller.maintenance.ImplementationIdFormController">
		<property name="commandName" value="implId"/>
		<property name="formView" value="/module/legacyui/admin/maintenance/implementationIdForm"/>
		<property name="successView" value="implementationid.form"/>
	</bean>
	<bean id="currentUsersFormController"
		  class="org.openmrs.web.controller.maintenance.CurrentUsersController">
		<property name="commandName" value="currentUsers"/>
		<property name="formView" value="/module/legacyui/admin/maintenance/currentUsers"/>
		<property name="successView" value="currentUsers.list"/>
	</bean>
	
	<bean id="forgotPasswordForm"
		class="org.openmrs.web.controller.ForgotPasswordFormController">
		<property name="commandName" value="forgotPassword"/>
		<property name="formView" value="/forgotPasswordForm"/>
		<property name="successView" value="forgotPassword.form"/>
	</bean>

	<bean id="visitTypeList"
		class="org.openmrs.web.controller.visit.VisitTypeListController">
		<property name="commandName" value="visitTypeList"/>
		<property name="formView" value="/admin/visits/visitTypeList"/>
		<property name="successView" value="visitType.list"/>
	</bean>

	<bean id="visitTypeForm"
		class="org.openmrs.web.controller.visit.VisitTypeFormController">
		<property name="commandName" value="visitType"/>
		<property name="validator" ref="visitTypeValidator"/>
		<property name="formView" value="/admin/visits/visitTypeForm"/>
		<property name="successView" value="visitType.list"/>
	</bean>

	<bean id="visitAttributeTypeList"
		class="org.openmrs.web.controller.visit.VisitAttributeTypeListController">
		<property name="commandName" value="visitAttributeTypeList"/>
		<property name="formView" value="/admin/visits/visitAttributeTypeList"/>
		<property name="successView" value="visitAttributeType.list"/>
	</bean>

	<bean id="visitAttributeTypeForm"
		class="org.openmrs.web.controller.visit.VisitAttributeTypeFormController">
		<property name="commandName" value="visitAttributeType"/>
		<property name="validator" ref="visitAttributeTypeValidator"/>
		<property name="formView" value="/admin/visits/visitAttributeTypeForm"/>
		<property name="successView" value="visitAttributeType.list"/>
	</bean>

    <bean id="obsForm" class="org.openmrs.web.controller.observation.ObsFormController">
        <property name="commandName" value="obs"/>
        <property name="formView" value="/module/legacyui/admin/observations/obsForm"/>
        <property name="successView" value="../encounters/encounter.form"/>
        <property name="validator" ref="obsValidator"/>
    </bean>
	
	<bean id="providerAttributeTypeList"
		class="org.openmrs.web.controller.provider.ProviderAttributeTypeListController">
		<property name="commandName" value="providerAttributeTypeList"/>
		<property name="formView" value="/module/legacyui/admin/provider/providerAttributeTypeList"/>
		<property name="successView" value="providerAttributeType.list"/>
	</bean>

	<bean id="providerAttributeTypeForm"
		class="org.openmrs.web.controller.provider.ProviderAttributeTypeFormController">
		<property name="commandName" value="providerAttributeType"/>
		<property name="validator" ref="providerAttributeTypeValidator"/>
		<property name="formView" value="/module/legacyui/admin/provider/providerAttributeTypeForm"/>
		<property name="successView" value="providerAttributeType.list"/>
	</bean>	
	
	<!-- NAME LAYOUT SUPPORT -->
	
	<!-- specialTokens ordered so that the subset string 'familyName' is after 'familyName*'-->
	<bean id="nameSupport" class="org.openmrs.layout.name.NameSupport">
		<property name="defaultLayoutFormat" value="short"/>
		<property name="layoutTemplates">
			<list>
				<ref bean="nameTemplateSpain" />
				<ref bean="nameTemplateLatinAmerica" />
				<ref bean="nameTemplateGivenFamily" />
				<ref bean="nameTemplateShort" />
				<ref bean="nameTemplateLong" />
			</list>
		</property>
		<property name="specialTokens">
			<list>
				<value>prefix</value>
				<value>givenName</value>
				<value>middleName</value>
				<value>familyNamePrefix</value>
				<value>familyNameSuffix</value>
				<value>familyName2</value>
				<value>familyName</value>
				<value>degree</value>
			</list>
		</property>
	</bean>
	
	<bean id="nameTemplateSpain" class="org.openmrs.layout.name.NameTemplate">
		<property name="displayName" value="Formato de Nombres en Espana"/>
		<property name="codeName" value="spain"/>
		<property name="nameMappings">
			<props>
				<prop key="givenName">PersonName.givenName</prop>
				<prop key="familyName">PersonName.familyName</prop>
				<prop key="familyName2">PersonName.familyName2</prop>
			</props>
		</property>
		<property name="sizeMappings">
			<props>
				<prop key="givenName">30</prop>
				<prop key="familyName">25</prop>
				<prop key="familyName2">25</prop>
			</props>
		</property>
		<property name="lineByLineFormat">
			<list>
				<value>givenName</value>
				<value>familyName</value>
				<value>familyName2</value>
			</list>
		</property>
	</bean>
	
	<bean id="nameTemplateLatinAmerica" class="org.openmrs.layout.name.NameTemplate">
		<property name="displayName" value="Formato de Nombres en Latino America"/>
		<property name="codeName" value="latinamerica"/>
		<property name="nameMappings">
			<props>
				<prop key="givenName">PersonName.firstName</prop>
				<prop key="middleName">PersonName.secondName</prop>
				<prop key="familyName">PersonName.familyName1</prop>
				<prop key="familyName2">PersonName.familyName2</prop>
			</props>
		</property>
		<property name="sizeMappings">
			<props>
				<prop key="givenName">30</prop>
				<prop key="middleName">30</prop>
				<prop key="familyName">30</prop>
				<prop key="familyName2">30</prop>
			</props>
		</property>
		<property name="lineByLineFormat">
			<list>
				<value>givenName</value>
				<value>middleName</value>
				<value>familyName</value>
				<value>familyName2</value>
			</list>
		</property>
	</bean>
	
	<bean id="nameTemplateGivenFamily" class="org.openmrs.layout.name.NameTemplate">
        <property name="displayName" value="&quot;Given Family&quot; Format"/>
        <property name="codeName" value="givenfamily"/>
        <property name="nameMappings">
                <props>
                        <prop key="givenName">PersonName.givenName</prop>
                        <prop key="familyName">PersonName.familyName</prop>
                </props>
        </property>
        <property name="sizeMappings">
                <props>
                        <prop key="givenName">30</prop>
                        <prop key="familyName">30</prop>
                </props>
        </property>
        <property name="lineByLineFormat">
                <list>
                        <value>givenName</value>
                        <value>familyName</value>
                </list>
        </property>
    </bean>

	<bean id="nameTemplateShort" class="org.openmrs.layout.name.NameTemplate">
		<property name="displayName" value="Short Name Format"/>
		<property name="codeName" value="short"/>
		<property name="nameMappings">
			<props>
				<prop key="givenName">PersonName.givenName</prop>
				<prop key="middleName">PersonName.middleName</prop>
				<prop key="familyName">PersonName.familyName</prop>
			</props>
		</property>
		<property name="sizeMappings">
			<props>
				<prop key="givenName">30</prop>
				<prop key="middleName">30</prop>
				<prop key="familyName">30</prop>
			</props>
		</property>
		<property name="lineByLineFormat">
			<list>
				<value>givenName</value>
				<value>middleName</value>
				<value>familyName</value>
			</list>
		</property>
	</bean>
	
	<bean id="nameTemplateLong" class="org.openmrs.layout.name.NameTemplate">
		<property name="displayName" value="Long Name Format"/>
		<property name="codeName" value="long"/>
		<property name="nameMappings">
			<props>
				<prop key="prefix">PersonName.prefix</prop>
				<prop key="givenName">PersonName.givenName</prop>
				<prop key="middleName">PersonName.middleName</prop>
				<prop key="familyNamePrefix">PersonName.familyNamePrefix</prop>
				<prop key="familyName">PersonName.familyName</prop>
				<prop key="familyName2">PersonName.familyName2</prop>
				<prop key="familyNameSuffix">PersonName.familyNameSuffix</prop>
				<prop key="degree">PersonName.degree</prop>
			</props>
		</property>
		<property name="sizeMappings">
			<props>
				<prop key="prefix">5</prop>
				<prop key="givenName">30</prop>
				<prop key="middleName">30</prop>
				<prop key="familyNamePrefix">8</prop>
				<prop key="familyName">25</prop>
				<prop key="familyName2">25</prop>
				<prop key="familyNameSuffix">8</prop>
				<prop key="degree">5</prop>
			</props>
		</property>
		<property name="lineByLineFormat">
			<list>
				<value>prefix</value>
				<value>givenName</value>
				<value>middleName</value>
				<value>familyNamePrefix familyName familyName2 familyNameSuffix</value>
				<value>degree</value>
			</list>
		</property>
	</bean>
	
	<bean id="nameSupportWeb" class="org.openmrs.layout.name.NameSupport" parent="nameSupport">
			<property name="layoutTemplates">
			<list>
				<ref bean="nameTemplateSpainWeb" />
				<ref bean="nameTemplateLatinAmericaWeb" />
				<ref bean="nameTemplateGivenFamilyWeb" />
				<ref bean="nameTemplateShortWeb" />
				<ref bean="nameTemplateLongWeb" />
			</list>
		</property>
	</bean>
	
	<bean id="nameTemplateSpainWeb" class="org.openmrs.layout.name.NameTemplate" parent="nameTemplateSpain" />
	
	<bean id="nameTemplateLatinAmericaWeb" class="org.openmrs.layout.name.NameTemplate" parent="nameTemplateLatinAmerica" />
	
	<bean id="nameTemplateGivenFamilyWeb" class="org.openmrs.layout.name.NameTemplate" parent="nameTemplateGivenFamily" />
	
	<bean id="nameTemplateShortWeb" class="org.openmrs.layout.name.NameTemplate" parent="nameTemplateShort" />
	
	<bean id="nameTemplateLongWeb" class="org.openmrs.layout.name.NameTemplate" parent="nameTemplateLong" />
	
	<bean id="fieldGenHandlerFactory" class="org.openmrs.web.taglib.fieldgen.FieldGenHandlerFactory">
		<property name="handlers">
			<props>
				<prop key="java.lang.String">org.openmrs.web.taglib.fieldgen.StringHandler</prop>
				<prop key="org.openmrs.Patient">
					org.openmrs.web.taglib.fieldgen.PatientHandler
				</prop>
				<prop key="org.openmrs.Person">
					org.openmrs.web.taglib.fieldgen.PersonHandler
				</prop>
				<prop key="org.openmrs.Concept">
					org.openmrs.web.taglib.fieldgen.ConceptHandler
				</prop>
				<prop key="org.openmrs.Encounter">
					org.openmrs.web.taglib.fieldgen.EncounterHandler
				</prop>
				<prop key="org.openmrs.User">org.openmrs.web.taglib.fieldgen.UserHandler</prop>
				<prop key="org.openmrs.Drug">org.openmrs.web.taglib.fieldgen.DrugHandler</prop>
				<prop key="org.openmrs.Location">
					org.openmrs.web.taglib.fieldgen.LocationHandler
				</prop>
				<prop key="org.openmrs.ProgramWorkflow">
					org.openmrs.web.taglib.fieldgen.ProgramWorkflowHandler
				</prop>
				<prop key="org.openmrs.Patient.exitReason">
					org.openmrs.web.taglib.fieldgen.GenericReasonHandler
				</prop>
				<prop key="java.util.Date">org.openmrs.web.taglib.fieldgen.DateHandler</prop>
				<prop key="org.openmrs.util.AttributableDate">org.openmrs.web.taglib.fieldgen.DateHandler</prop>
				<prop key="org.openmrs.Provider">
					org.openmrs.web.taglib.fieldgen.ProviderHandler
				</prop>
			</props>
		</property>
	</bean>
	

	<bean id="webEventListeners" parent="openmrsEventListeners">
	    <property name="globalPropertyListeners">
	        <list value-type="org.openmrs.api.GlobalPropertyListener">
	            <bean class="org.openmrs.web.controller.PseudoStaticContentController" />
	            <bean class="org.openmrs.web.dwr.DWRPatientService" />
	            <bean class="org.openmrs.web.WebUtil" />
	        </list>
	    </property>
	</bean>
	
	<bean id="parentTheme" class="org.openmrs.web.StaticThemeSource">
		<property name="themeName" value="themes/defaults"/>
	</bean>
	
	<!-- Specify the default OpenMRS look and feel. -->
	<bean id="themeSource"
		class="org.springframework.ui.context.support.ResourceBundleThemeSource">
		<property name="parentThemeSource" ref="parentTheme"/>
		<property name="basenamePrefix" value="themes/"/>
	</bean>
	
	<bean id="themeResolver" class="org.openmrs.web.OpenmrsCookieThemeResolver" primary="true">
		<property name="defaultThemeName" value="green"/>
	</bean>
	
	<bean id="themeChangeInterceptor"
		class="org.springframework.web.servlet.theme.ThemeChangeInterceptor">
		<property name="paramName" value="theme"/>
	</bean>
	
	<bean id="localeResolver" class="org.openmrs.web.OpenmrsCookieLocaleResolver" primary="true" />

	<bean id="localeChangeInterceptor"
		class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
		<property name="paramName" value="lang"/>
	</bean>
	
	<bean class="org.openmrs.web.CopyLegacyUiContentToWebInf" />
	
</beans>